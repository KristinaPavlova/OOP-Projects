# Dungeons-Dragons
Софийски университет „Св. Климент Охридски“
Факултет по математика и информатика
КУРСОВ ПРОЕКТ ПО ОБЕКТНО-ОРИЕНТИРАНО ПРОГРАМИРАНЕ
летен семестър 2020/2021г.

Проект : Dungeons & Dragons


Изготвил: Кристина Руменова Павлова
Специалност: Информационни системи
Факултетен номер: 72031
Група: 1




Съдържание
Глава 1. Увод 
1.1. Описание и идея на проекта 
1.2. Цел и задачи на разработката 
1.3.  Структура на документацията 
Глава 2. Преглед на предметната област 
2.1. Основни дефиниции, концепции и алгоритми, които ще бъдат използвани 
2.2. Дефиниране на проблеми и сложност на поставената задача
2.3. Подходи, методи (модели и стандарти) за решаване на поставените проблемите 
2.4  Потребителски (функционални) изисквания (права, роли, статуси, диаграми, ...) и качествени (нефункционални) изисквания (скалируемост, поддръжка, ...)
Глава 3. Проектиране 
3.1. Обща архитектура – ООП дизайн
3.2. Диаграми (на структура и поведение - по обекти, слоеве с най-важните извадки от кода) 
Глава 4. Реализация, тестване 
4.1. Реализация на класове (включва важни моменти от реализацията на класовете и малки фрагменти от кода)
4.2. Управление на паметта и алгоритми. Оптимизации.
4.3. Планиране, описание и създаване на тестови сценарии (създаване на примери)
Глава 5. Заключение 
5.1. Обобщение на изпълнението на началните цели
5.2. Насоки за бъдещо развитие и усъвършенстване
Глава 1. Увод

Основната идея на проекта е да се реализира игра, подобна на известната “Dungeons and Dragons” (D&D). Основната цел на играта е  героят на потребителя да се придвижва по игрално поле - карта, събирайки съкровища и побеждавайки чудовища.
Играта е разделена на нива. С повишаването на нивата се покачва и тяхната трудност (размерът на игралното поле , броят чудовища). За да премине успешно  нивото, героят трябва да се придвижи от началната си позиция (горният ляв ъгъл на игралното поле) до  позицията, която представлява изход от лабиринта (долният десен ъгъл на полето).


С определен набор от команди героят може да се придвижва (нагоре, надолу, наляво и надясно).
Ако позицията на героя съвпада с позицията на чудовище (дракон) , протича битка. В битката героят и чудовището последователно се атакуват , докато единият от двамата не загуби ( неговият health стане равен на 0) . Ако героят загуби битката, играта приключва. В противен слувай героят продължава пътя си в лабиринта.
Ако позицията на героя съвпада с позицията на съкровище (treasure), героят е изправен пред избор дали да задържи премета ,  който е открил (броня / заклинание / оръжие) или да го остави.
След всяко преминато ниво показателите на героя и чудовищата пред които се изправя се изменят. 

Играта съхранява следната информация за всеки player :
    • username (потребителско име)
    • password (парола)
    • Race (расата на героя с който играе)
    • Health (здравето на героя)
    • Strenght (грубата сила на героя в битка)
    • Mana (магическата сила на героя в битка)
    • Armor (бронята на героя в проценти)
    • Spell (заклинанието на героя в проценти)
    • Weapon (оръжието на героя в проценти)
    • level (нивото до което играчът е стигнал)
      - ако играчът загуби (драконът спечели битката), започва играта отново от първо ниво

Глава 2. Преглед на предметната област
Един от основните компоненти в проекта е класът Game. Основните методи на класа са:
    • menu()
    • enterUser()
    • start()
    • battle()
    • foundTreasure()

При стартиране на програмата се изпълнява методът menu() който първо изпълнява метода enterUser().
enterUser()  е меню, от което потребителя избира дали да продължи играта с вече съществуващ user, или да създаде нов.

Потребителят въвежда число от целочислен тип (int ) 
1 – ако  иска да продължи със съществуващ user
2 – ако  иска да създаде нов user.
(Има валидация за коректност на избора) 
Sign up :
Въвежда се String (името на потребителя) , при съвпадение на въведеното име с вече записаните във файл се изписва съобщение за въвеждане на парола (String), която също трябва да съвпадне със записаната във файла.
Ако името или паролата не съвпадат отново се връща менюто на enterUser().
Log in:
При избора Log in , играча въвежда String – username на потребителя , както и парола - password (String). След като е въвел своя username  и password, играчът избира расата на своя герой ( human / magician / warrior ).
(за расата също има валидация за коректен избор)

След успешното завършване на метода enterUser() , метода menu() предоставя следното меню:
Потребителят въвежда число съответстващо на неговия избор:
1 – за стартиране на нова игра
2 – изход от играта
Методът има валидация за коректност на потребителския избор.

При стартиране на играта се извиква метода start() . В този метод се илюстрират лабиринта с героя и чудовищата и се въвежда движение .
      
Ако позицията на героя съвпадне с тази на чудовище протича битка – извиква се метода battle(). В него героят и чудовището последователно се атакуват . На случаен принцип се избира кой да атакува пръв.
Атаката на героя е String въведен от потребителя, който може да бъде - magic или brute force (има валидация за коректна атака).
Атаката на чудовището може да бъде - magic или brute force (избира се на случаен принцип ).
Ако героят победи, играта продължава и героят заема позицията на чудовището . В противен случай играта приключва и потребителят избира дали да запази своите данни (username , password ,hero), или не.

Aко позицията на героя съвпадне с позицията на съкровищв (treasure) , потребителят въвежда String (take / leave ) в зависимост дали иска да задържи съкровището, или не.
take – взима съкровището
leave – оставя съкровището
(има валидация за избора на потребителя)

Игралното поле (лабиринтът) е представено чрез класа Maze, който съдържа размерите на лабиринта и неговите основни функционалности. Констроирането на игралното поле (лабиринта) е един от основните проблеми при изграждането на играта.
Лабиринтът трябва да има поне един коректен път, т.е. да съществува път, по който да може да се стигне от началната позиция на героя до позицията за изход от нивото. Също така цялата площ на лабиринта трябва да бъде максимално запълнена с пътища (без затворени очастъци). За тази цел при изграждането на игралното поле е използван алгоритъма (Backtracking).

  Backtracking e алгоритъм, който рекурсивно намира коректния      път в лабиринт. Всеки път, когато се достигне позиция, от която не може да се продължи в нито една посока (dead-end), се връщаме назад и опитваме нов път, докато не достигнем крайната дестинация.
За пълното запълване на лабиринта е използван същия метод, започвайки от крайната дестинация до достигане на началната позиция. 

Глава 3. Проектиране
Участниците в играта са героят на потребителя и чудовищата, пред които се изправя, всички те имат следните параметри
    • strenght (сила)
    • mana()
    • health  (здраве)
    • position (позиция в лабиринта)
Поради общите им параметри и функционалностите, които те предоставят, е изграден класът Character, който ги обединява. Двата класа Hero и Monster наследяват Character и допълват своите специфични данни и функции.
 




Глава 4. Реализация, тестване 
Класът Hero съдържа следните член данни :
    • Race heroRace; 
    • double armor ; 
    • double weapon ; 
    • double spell ;
Race представлява Enum от три елемента (различните раси, към които героят може да принадлежи ) - human, magician, warrior
броня - предпазва от атака, намалявайки я с определен процент
оръжие - добавя процент към силовата атака на героя
заклинание - добавя процент към атаката със заклинание
В началото при регистрация в играта, героят е на ниво 1. Инвентарът му се състои от обикновен меч (20%) и огнена топка (20%), без броня. 

Основните методи и оператори за класа са:
    1. Операторът за въвеждане на нов герой
       В метода се въвежда String (низ с произволна дължина). Въведеният string се сравнява с трите възможни раси за героя. Функцията има валидация за коректност на въведения string:
       ако въведения от нас string не съвпада с никоя от възможните три раси , се извежда съобщение за повторно въвеждане.
       При съвпадение с някоя от расите параметрите на героя се конструират на база избраната раса чрез метода constructOnChosenRace(). 




2. методът constructOnChosenRace()
В зависимост от избраната от потребителя раса за своя герой , неговите параметри се задават по следни начин:
Раса
Сила
Мана
Здраве
човек
30
20
50
маг
10
40
50
воин
40
10
50

Чудовища
Класът Monster е наследник на класа Character . Той илюстрира чудовищата в играта. Обектите от тип Monster се конструират в зависимост от достигнатото ниво.
В началото на играта (на първо ниво) те са:
Сила
Мана
Здраве
25
25
50
Също така класът има член данна armor, която представлява – бронята на чудовището и намалят атаката с 15%.
С покачване на нивото, чудовищата получават по 10 точки към всеки един свой показател и 5% към бронята си. 
Драконите стоят неподвижно там, където са позиционирани в началото на играта. Позицията на чудовищата в текущия лабиринт се избират на случаен принцип.

Глава 5. Заключение 
Основната идея на проекта е да се реализира игра, подобна на известната “Dungeons and Dragons” (D&D). Проектът има перспективи за надграждане в много и разнообразни насоки. Една от тях е графичното оформление на играта. Друго усъвършенстване би било възможност за играене в екип с други герои.
